
<!DOCTYPE html>
<html lang="de">
<head>
  <link rel="stylesheet" href="style.css">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Live Kommentare ‚Äì SnoozeWave</title>
  <style>
    body {
  background: linear-gradient(to bottom, #ffffff, #ede9fe);
  min-height: 100vh;
  font-family: 'Segoe UI', sans-serif;
  padding: 2rem;

      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen;
      background-color: #f9f9ff;
      margin: 0;
      padding: 2rem;
      color: #111;
    }
    h1 {
      color: #7c3aed;
      text-align: center;
      margin-bottom: 2rem;
    }
    .comment-box {
  display: flex;
  flex-direction: row;
  min-height: 160px;
  width: 100%;
  box-sizing: border-box;
  align-items: flex-start;
  gap: 1rem;
  padding: 1rem 1.5rem;
  background: white;
  border-radius: 0.75rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);

  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.75rem;
  background: linear-gradient(to bottom, #ffffff, #ede9fe);
  box-shadow: 0 10px 25px rgba(124, 58, 237, 0.25);
      background-color: white;
      border: 1px solid #e5e7eb;
      border-radius: 1rem;
      padding: 1rem 1.5rem;
      margin-bottom: 1rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
  
button:hover {
  opacity: 0.9;
  transform: scale(1.05);
  transition: all 0.2s ease;
}
</style>
</head>
<body>



<style>
#password-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: linear-gradient(to bottom right, #ede9fe, #ede9fe);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

#password-box {
  background: white;
  border-radius: 1rem;
  box-shadow: 0 8px 30px rgba(0,0,0,0.15);
  padding: 2rem;
  text-align: center;
  font-family: 'Segoe UI', sans-serif;
  max-width: 300px;
  width: 90%;
}

#password-box input {
  padding: 0.8rem;
  font-size: 1rem;
  width: 100%;
  border: 1px solid #ddd;
  border-radius: 0.5rem;
  margin-top: 1rem;
}

#password-box button {
  background: #7c3aed;
  color: white;
  border: none;
  border-radius: 0.5rem;
  padding: 0.6rem 1.2rem;
  font-size: 1rem;
  margin-top: 1rem;
  cursor: pointer;
}
</style>

<div id="password-overlay">
  <div id="password-box">
    <h2>üß† Admin-Zugang</h2>
    <p>Bitte Passwort eingeben, um fortzufahren.</p>
    <input type="password" id="pw-input" placeholder="Passwort">
    <button onclick="checkPassword()">Los geht's!</button>
    <p id="pw-feedback" style="margin-top:1rem; color: #dc2626;"></p>
  </div>
</div>

<script>
function checkPassword() {
  const correct = "snusadmin1";
  const input = document.getElementById("pw-input").value;
  const feedback = document.getElementById("pw-feedback");
  if (input === correct) {
    document.getElementById("password-overlay").style.display = "none";
  } else {
    feedback.textContent = "üòÖ Falsches Passwort ‚Äì versuch's nochmal!";
  }
}
</script>

  <h1 style="font-size: 2.2rem; color: #000000;">Live Kommentare</h1>
  <div id="comments-container" style="max-width: 800px; margin: 0 auto;">‚è≥ Kommentare werden geladen...</div>

<h2 style="text-align:center; color:#000000; margin-top:3rem; font-size: 2.2rem;">
  Beantwortete Kommentare
  <button id="toggle-archive" style="margin-left:1rem; font-size: 1.3rem; font-weight: bold; border-radius: 100px; transition: all 0.3s ease; width: 2.5rem; height: 2.5rem; display: inline-flex; align-items: center; justify-content: center; background: #ede9fe; color: #6b21a8; border: 1px solid #d8b4fe; border-radius: 6px; padding: 4px 10px; cursor: pointer; border-radius: 50%; box-shadow: 0 4px 10px rgba(0,0,0,0.15); background: #ede9fe; color: #6b21a8;">‚ñº</button>
</h2>
<div id="answered-container" style="max-width: 800px; margin: 0 auto;"></div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js">

</script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js">

</script>

  <script>
    // Deine Firebase-Konfiguration
    const firebaseConfig = {
      apiKey: "AIzaSyB0JSeJD3M-IAUQ-YCf_xtBmA9BsGX7dis",
      authDomain: "snoozewave-comments.firebaseapp.com",
      projectId: "snoozewave-comments",
      storageBucket: "snoozewave-comments.firebasestorage.app",
      messagingSenderId: "604975879327",
      appId: "1:604975879327:web:ed61ec0bf858734808feaa",
      measurementId: "G-YCRMRYBL0F",
      databaseURL: "https://snoozewave-comments-default-rtdb.firebaseio.com"
    };

    // Initialisieren
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
const avatarColors = ['#f87171', '#fbbf24', '#34d399', '#60a5fa', '#a78bfa', '#f472b6'];


    async function loadComments() {
      try {
        const snapshot = await db.ref("comments").once("value");
        const comments = snapshot.val() || [];

        const container = document.getElementById("comments-container");
  const archived = document.getElementById("answered-container");
  archived.innerHTML = "";
        container.innerHTML = "";

        
comments.forEach((entry, index) => {
  const box = document.createElement("div");
  box.className = "comment-box";

  const avatar = document.createElement("div");
  avatar.style.width = "40px";
  avatar.style.height = "40px";
  avatar.style.borderRadius = "50%";
  avatar.style.background = avatarColors[index % avatarColors.length];
  avatar.style.flexShrink = "0";
  box.appendChild(avatar);

  const content = document.createElement("div");
  content.style.flexGrow = "1";
  content.style.display = "flex";
  content.style.flexDirection = "column"; content.style.justifyContent = "space-between"; content.style.height = "100%";
  content.style.gap = "0.5rem";
  const name = document.createElement("strong"); name.textContent = "Anonym";
const text = document.createElement("div"); text.textContent = entry.text || "";
content.appendChild(name);
content.appendChild(text);

  if (entry.status === "archived") {
    
  const deleteBtn = document.createElement("button");
  deleteBtn.textContent = "L√∂schen";
  deleteBtn.style.marginTop = "0.5rem";
  deleteBtn.style.background = "#dc2626";
  deleteBtn.style.color = "white";
  deleteBtn.style.border = "none";
  deleteBtn.style.borderRadius = "6px";
  deleteBtn.style.padding = "6px 12px";
  deleteBtn.style.cursor = "pointer";
  deleteBtn.onclick = async () => {
    const snapshot = await db.ref("comments").once("value");
    const current = snapshot.val() || [];
    current.splice(index, 1);
    await db.ref("comments").set(current);
  };
  const btnRow = document.createElement("div");
    btnRow.style.display = "flex"; btnRow.style.justifyContent = "flex-end"; btnRow.style.marginTop = "auto";
    btnRow.style.justifyContent = "flex-end";
    btnRow.appendChild(deleteBtn);
    content.appendChild(btnRow); box.appendChild(content);
  document.getElementById("answered-container").appendChild(box);
  } else {
    const archiveBtn = document.createElement("button");
    archiveBtn.textContent = "Beantworten";
    archiveBtn.style.marginTop = "0.5rem";
    archiveBtn.style.background = "#7c3aed";
    archiveBtn.style.color = "white";
    archiveBtn.style.border = "none";
    archiveBtn.style.borderRadius = "6px";
    archiveBtn.style.padding = "6px 12px";
    archiveBtn.style.cursor = "pointer";
    archiveBtn.onclick = async () => {
      const snapshot = await db.ref("comments").once("value");
      const current = snapshot.val() || [];
      current[index].status = "archived";
      await db.ref("comments").set(current);
    };
    const btnRow = document.createElement("div");
    btnRow.style.display = "flex"; btnRow.style.justifyContent = "flex-end"; btnRow.style.marginTop = "auto";
    btnRow.style.justifyContent = "flex-end";
    btnRow.appendChild(archiveBtn);
    content.appendChild(btnRow); box.appendChild(content);
    container.appendChild(box);
  }

        });
      } catch (error) {
        console.error("Fehler beim Laden der Kommentare:", error);
      }
    }

    loadComments(); // Initial
    setInterval(loadComments, 500); // alle 2 Sekunden
  

</script>

<script>
  const toggleBtn = document.getElementById("toggle-archive");
  const archiveContainer = document.getElementById("answered-container");

  toggleBtn.addEventListener("click", () => {
    const isHidden = archiveContainer.style.display === "none";
    archiveContainer.style.display = isHidden ? "block" : "none";
    toggleBtn.textContent = isHidden ? "‚ñº" : "‚ñ≤";
  });


</script>
</body>

</html>
